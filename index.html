<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backbone Sandbox</title>	
		<link href="./css/bootstrap.css" rel="stylesheet">    
    <link href="./css/bootstrap-responsive.css" rel="stylesheet">
		<link href="./css/style.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Libraries: 	-->	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

  </head>
  <body>
	<script type="text/javascript">
	$(function() {
		
		window.App = {};
		
		//Model
		var TodoItem = Backbone.Model.extend({
		});
		
		//MODEL INSTANCE
		var todoItem = new TodoItem();
		
		//COLLECTION
		var TodoList = Backbone.Collection.extend({
			//url: '/todos'
			model: TodoItem
		});
		
		var todoList = new TodoList(); //manages a set of models
		
		App.todoList = todoList;
			
		todoList.reset([
			{ description: 'Pick up milk', status: 'incomplete'},
			{ description: 'Learn backbonejs', status: 'complete'},
			{ description: 'Get into coffee', status: 'incomplete'},
			{ description: 'Make money', status: 'incomplete'},
		]);
		
		
		//View Model
		var TodoView = Backbone.View.extend({			
			
			//template: _.template($("#todoTemplate").html()),
			template: _.template('<h3><%= description %></h3>'),
			
			render: function(){
				//var html = '<h3>' + this.model.get('description') + '</h3>';
				this.$el.html(this.template(this.model.toJSON()));
				return this.$el;
			}						
		});

		//COLLECTION VIEW
		var TodoListView = Backbone.View.extend({
			render: function(){
				this.collection.forEach(this.addOne, this);
			},
			addOne: function(todoItem){
				var todoView = new TodoView({model: todoItem});
				this.$el.append(todoView.render().el);
			}
		});
		
		
		
		var todoListView = new TodoListView({collection: todoList});
		todoListView.render();
		console.log(todoListView.el);	
		
		


	});	
	</script>
  <div class="navbar navbar-inverse">
	  <div class="navbar-inner">
	    <div class="container">

	      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
	      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </a>

	      <!-- Be sure to leave the brand out there if you want it shown -->
	      <a class="brand" href="#">Backbone Sandbox</a>

	      <!-- Everything you want hidden at 940px or less, place within here -->
	      <div class="nav-collapse">
	        <!-- .nav, .navbar-search, .navbar-form, etc -->
					<form class="navbar-search pull-left">
					  <input type="text" class="search-query" placeholder="Search">
					</form>
	      </div>

	    </div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="row-fluid">
	    <div class="span2">
				<script type="text/template" id="todoTemplate">
					<h3 class='<%= status %>'><input type=checkbox <% if(status === "complete") print("checked") %>/>  <%= description %></h3>				
				</script>
			</div>
		</div>
	</div>
	
	<script src="js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
  </body>
</html>